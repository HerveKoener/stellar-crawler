var StellarCrawler={callback:function(r){console.log(r.data.toSource())},publicServer:"https://horizon.stellar.org",testServer:"https://horizon-testnet.stellar.org",crawler:{history:[],links:null,data:null,load:function(r){StellarCrawler.crawler.data=r;var e=StellarCrawler.crawler.history;StellarCrawler.crawler.links=e.length>1?{back:e[e.length-2]}:{},$.map(r._links,function(r,e){var t=r.href;StellarCrawler.crawler.links[e]=new StellarCrawler.Link(t.indexOf("{")>0?t.substring(0,t.indexOf("{")):t)}),StellarCrawler.callback(StellarCrawler.crawler)},_follow:function(r){if(!(r in this.links))throw new StellarCrawler.Exception("Link "+r+" not found.");this.links[r].follow()},getLinks:function(){return this.links},getData:function(){return this.data},getHistory:function(){return this.history},followNext:function(){this._follow("next")},followPrev:function(){this._follow("prev")},followBack:function(){this._follow("back")}},Link:function(r){this.href=r,this.follow=function(){var r=StellarCrawler.crawler.history;r.length>1&&r[r.length-2].href===this.href?StellarCrawler.crawler.history.pop():0!=r.length&&r[r.length-1].href===this.href||StellarCrawler.crawler.history.push(this),$.get(this.href,function(r){StellarCrawler.crawler.load(r)})},this.getHref=function(){return this.href}},setPublicServer:function(r){return this.publicServer=r},setTestServer:function(r){return this.testServer=r},newInstance:function(r,e,t){this.callback=e,"/"==t.slice(-1)&&(t=t.slice(0,-1)),""==r&&(r="/ledgers/"),new StellarCrawler.Link(t+r).follow()},forAccount:function(r,e,t){var l=t?this.publicServer:testServer;console.log(l),this.newInstance("/accounts/"+r,e,l)},forLedger:function(r,e,t){var l=t?publicServer:testServer;this.newInstance("/ledgers/"+r,e,l)},forOperation:function(r,e,t){var l=t?publicServer:testServer;this.newInstance("/operations/"+r,e,l)},forTransaction:function(r,e,t){var l=t?publicServer:testServer;this.newInstance("/transactions/"+r,e,l)},forLink:function(r,e){this.callback=e,r.follow()}};